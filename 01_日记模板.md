---
time: <% moment(tp.file.creation_date()).format("YYYY年MM月DD日, dddd, HH:mm") %>
weather:
sleep:
mood:
sport:
tags:
  - 日记
  - 生活
---
<< [[02_日记/<% tp.date.now("YYYY", -1) %>/<% tp.date.now("MM", -1) %>/<% tp.date.now("YYYY-MM-DD", -1) %>|昨天]] | [[02_日记/<% tp.date.now("YYYY", 1) %>/<% tp.date.now("MM", 1) %>/<% tp.date.now("YYYY-MM-DD", 1) %>|明天]] >>

# 1. 今日状态

- 1.1 **天气**
```dataviewjs
const FIELD = "weather";
const OPTIONS = ["☀️", "⛅", "🌧️","❄️"];
const file = dv.current().file;
const cache = app.metadataCache.getFileCache(file);
const current = cache?.frontmatter?.[FIELD] ?? "";
const container = this.container.createEl("div");
const select = container.createEl("select", {attr: { id: "my_dropdown" }});
const placeholder = select.createEl("option", {text: "今日天气",value: "",disabled: true});
if (!current) placeholder.selected = true;
for (const opt of OPTIONS) {
  const o = select.createEl("option", { text: opt, value: opt });
  if (opt === current) o.selected = true;}
select.addEventListener("change", async (e) => {
  const value = e.target.value;
  await app.fileManager.processFrontMatter(
    app.vault.getAbstractFileByPath(file.path),
    (fm) => {fm[FIELD] = value;});});
```

- 1.2 **睡眠**
```dataviewjs
const FIELD = "sleep";
const OPTIONS = ["22:00~24:00", "00:00~02:00", "02:00~04:00","04:00~06:00"];
const file = dv.current().file;
const cache = app.metadataCache.getFileCache(file);
const current = cache?.frontmatter?.[FIELD] ?? "";
const container = this.container.createEl("div");
const select = container.createEl("select", {attr: { id: "my_dropdown" }});
const placeholder = select.createEl("option", {text: "昨日入眠",value: "",disabled: true});
if (!current) placeholder.selected = true;
for (const opt of OPTIONS) {
  const o = select.createEl("option", { text: opt, value: opt });
  if (opt === current) o.selected = true;}
select.addEventListener("change", async (e) => {
  const value = e.target.value;
  await app.fileManager.processFrontMatter(
    app.vault.getAbstractFileByPath(file.path),
    (fm) => {fm[FIELD] = value;});});
```

- 1.3 **心情**
```dataviewjs
const FIELD = "mood";
const OPTIONS = ["😊", "😐", "☹️", "😢"];
const file = dv.current().file;
const cache = app.metadataCache.getFileCache(file);
const current = cache?.frontmatter?.[FIELD] ?? "";
const container = this.container.createEl("div");
const select = container.createEl("select", {attr: { id: "my_dropdown" }});
const placeholder = select.createEl("option", {text: "今日心情",value: "",disabled: true});
if (!current) placeholder.selected = true;
for (const opt of OPTIONS) {
  const o = select.createEl("option", { text: opt, value: opt });
  if (opt === current) o.selected = true;}
select.addEventListener("change", async (e) => {
  const value = e.target.value;
  await app.fileManager.processFrontMatter(
    app.vault.getAbstractFileByPath(file.path),
    (fm) => {fm[FIELD] = value;});});
```

- 1.4 **运动**
```dataviewjs
const FIELD = "sport";
const OPTIONS = ["🏃‍♀️", "🏊🏻‍♀️", "🏸", "🥊", "❌"];
const file = dv.current().file;
const cache = app.metadataCache.getFileCache(file);
const current = cache?.frontmatter?.[FIELD] ?? "";
const container = this.container.createEl("div");
const select = container.createEl("select", {attr: { id: "my_dropdown" }});
const placeholder = select.createEl("option", {text: "今日运动",value: "",disabled: true});
if (!current) placeholder.selected = true;
for (const opt of OPTIONS) {
  const o = select.createEl("option", { text: opt, value: opt });
  if (opt === current) o.selected = true;}
select.addEventListener("change", async (e) => {
  const value = e.target.value;
  await app.fileManager.processFrontMatter(
    app.vault.getAbstractFileByPath(file.path),
    (fm) => {fm[FIELD] = value;});});
```
# 2. 今日行动

1. 计划行动
<% await tp.file.include("[[大三上寒假日程规划]]") %>	

2. 今日行程
	- 

3. 今日创建的文件
> [!note]- 📅
>```dataviewjs
>const pageDateString = dv.current().file.name.substring(0, 10);
>const targetDate = dv.luxon.DateTime.fromISO(pageDateString);
>if (targetDate.isValid) {
> 	   dv.list(
>        dv.pages("")
>            .where(p => p.file.cday && p.file.cday.toISODate() === targetDate.toISODate())
>            .sort(p => p.file.ctime, 'asc')
>            .map(p => dv.fileLink(p.file.path))
>    );
>} else {
>    dv.paragraph("⚠️ 无法从文件名中解析出有效日期（YYYY-MM-DD）。");
>}
>```
4. 今日修改的文件
> [!note]- 📅
>```dataviewjs
>const pageDateString = dv.current().file.name.substring(0, 10);
>const targetDate = dv.luxon.DateTime.fromISO(pageDateString);
>if (targetDate.isValid) {
>    dv.list(
>        dv.pages("")
>            .where(p => p.file.mday && p.file.mday.toISODate() === targetDate.toISODate())
>            .sort(p => p.file.mtime, 'asc')
>            .map(p => dv.fileLink(p.file.path))
>    );
>} else {
>    dv.paragraph("⚠️ 无法从文件名中解析出有效日期（YYYY-MM-DD）。");
>}
>```
# 3. 重要事件

1. 
# 4. 复盘反思

- 